<!doctype html>
<html>
  <head>
    <title>{% block title %}OpenBMC Bot{% endblock %}</title>
    <link rel="stylesheet" type="text/css" href="/bot/style.css" />
  </head>
  <body>
    <div class="header">
      <div class="header-buttons">
        <button id="home-button" onclick="goHome()" title="Home">üè†</button>
        <div class="theme-toggle">
          <button id="theme-toggle" onclick="toggleTheme()">
            <span id="theme-icon">üåô</span>
          </button>
        </div>
      </div>
    </div>
    {% block content %}{% endblock %}
    <script>
      // Check for saved theme preference or respect system preference
      const savedTheme = localStorage.getItem("theme");
      const systemPrefersDark = window.matchMedia(
        "(prefers-color-scheme: dark)",
      ).matches;

      if (savedTheme === "dark" || (!savedTheme && systemPrefersDark)) {
        document.body.classList.add("dark-mode");
        document.getElementById("theme-icon").textContent = "‚òÄÔ∏è";
      } else {
        document.body.classList.add("light-mode");
        document.getElementById("theme-icon").textContent = "üåô";
      }

      function toggleTheme() {
        if (document.body.classList.contains("dark-mode")) {
          document.body.classList.remove("dark-mode");
          document.body.classList.add("light-mode");
          document.getElementById("theme-icon").textContent = "üåô";
          localStorage.setItem("theme", "light");
        } else {
          document.body.classList.remove("light-mode");
          document.body.classList.add("dark-mode");
          document.getElementById("theme-icon").textContent = "‚òÄÔ∏è";
          localStorage.setItem("theme", "dark");
        }
      }

      function goHome() {
        window.location.href = "/bot";
      }

      // Hide home button on root page
      document.addEventListener("DOMContentLoaded", function () {
        const path = window.location.pathname;
        const homeButton = document.getElementById("home-button");
        if (path === "/bot" || path === "/bot/") {
          homeButton.style.display = "none";
        }
      });

      // Toggle section visibility
      function toggleSection(sectionName) {
        const section = document.getElementById(sectionName + "-section");
        const button = event.target;
        if (section.style.display === "none") {
          section.style.display = "block";
          button.classList.remove("collapsed");
        } else {
          section.style.display = "none";
          button.classList.add("collapsed");
        }
      }
    </script>
  </body>
</html>
